---
- config:
    - testset: "Testing login url"

- test:
    - name: "login - invalid password"
    - group: "[login]"
    - url: "/login"
    - method: "POST"
    - body: '{"email": "john@doe.com", "password": "abc123"}'
    - validators:
          - compare: {jsonpath_mini: "error", comparator: "eq", expected: "Combinación mail de usuario y contraseña inválida."}
    - expected_status: [401] # unauthorized

- test:
    - name: "login - ok"
    - group: "[login]"
    - url: "/login"
    - method: "POST"
    - body: '{"email": "john@doe.com", "password": "123abc"}'
    - validators:
          - compare: {jsonpath_mini: "user_id", comparator: "eq", expected: 1}
    - expected_status: [200] # ok
