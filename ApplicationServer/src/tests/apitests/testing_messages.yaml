---
- config:
    - testset: "Testing messages url"

- test:
    - name: "Add messages - missing to id"
    - group: "[messages]"
    - url: "/messages"
    - method: "PUT"
    - headers: {Authorization: tokenUser1}
    - body: '{"from": 1, "message": "hello"}'
    - validators:
          - compare: {jsonpath_mini: "error", comparator: "eq", expected: "Missing to user"}
    - expected_status: [400] # bad request

- test:
    - name: "Add messages - equals ids"
    - group: "[messages]"
    - url: "/messages"
    - method: "PUT"
    - headers: {Authorization: tokenUser1}
    - body: '{"to": 1, "from": 1, "message": "hello"}'
    - validators:
          - compare: {jsonpath_mini: "error", comparator: "eq", expected: "From user and to user cannot be equals"}
    - expected_status: [400] # bad request

- test:
    - name: "Add messages - nonexistent to user"
    - group: "[messages]"
    - url: "/messages"
    - method: "PUT"
    - headers: {Authorization: tokenUser1}
    - body: '{"to": 12, "from": 1, "message": "hello"}'
    - validators:
          - compare: {jsonpath_mini: "error", comparator: "eq", expected: "Usuario con el id 12 no existe en el sistema"}
    - expected_status: [404] # not found

