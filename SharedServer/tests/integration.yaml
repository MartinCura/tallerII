---
- config:
    - testset: "Quickstart app tests"

# - test:
#     - group: "Quickstart"
#     - name: "Basic smoketest"
#     - url: "/api/job_positions/"

# - test:
#     - group: "Quickstart"
#     - name: "Crear una categoría"
#     - url: "/job_positions/categories/software"
#     #- url: "/api/job_positions"
#     - method: "POST"
#     #- body: '{"first_name": "Gaius","id": 10,"last_name": "Baltar","login": "baltarg"}'

- test:
  - url: "/categories"
  - method: "GET"
  - validators:
    - compare: {jsonpath_mini: "categories", comparator: "count_eq", expected: 0}

- test:
  - headers: {'Content-Type': 'application/json'}
  - name: "Crear una categoría"
  - url: "/categories"
  - method: "POST"
  - body: '{"category": {
                            "name": "sport_name1",
                            "description": "description1"
                        }
              }'
  - validators:
    - compare: {jsonpath_mini: "category.name", comparator: "eq", expected: 'sport_name1'}
    - compare: {jsonpath_mini: "category.description", comparator: "eq", expected: 'description1'}

- test:
  - url: "/categories"
  - method: "GET"
  - validators:
    - compare: {jsonpath_mini: "categories", comparator: "count_eq", expected: 1}  
    #- compare: {jsonpath_mini: "total_count", comparator: "eq", expected: 1}
  # - compare: {jsonpath: "categories[0].name", comparator: "eq", expected: 'description1 '}